#!/bin/bash
#--------------------------------------------------------------------------
# strreplace
#	Replace string in file of given extension
#	Copyright (c) 2010-2014, Michael Paquier
#
#	List of arguments:
#	1) file extension type
#	2) old string
#	3) new string
#--------------------------------------------------------------------------

EXPECTED_ARGS=3

if [ $# -ne $EXPECTED_ARGS ]
then
	echo "Usage: `basename $0` [extension] [old_str] [new_str]"
	echo "Exemple: `basename $0` php old_text new_text"
	exit 1
fi

EXTENSION=$1
OLDSTR=$2
NEWSTR=$3

#Simply replace string with sed and erase old file
for file in `find . -name "*.$EXTENSION"`
do
	if [ $HOME_ENV_NAME == 'Darwin' ]
	then
		# In OSX, sed has a mandatory value with option -i
		sed -i "" "s/$OLDSTR/$NEWSTR/g" $file
	else
		sed -i "s/$OLDSTR/$NEWSTR/g" $file
	fi
done

exit $?
